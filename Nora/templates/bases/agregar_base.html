{% extends "base.html" %}
{% block title %}Agregar Base{% endblock %}
{% block content %}
<main class="d-flex justify-content-center align-items-center flex-column mt-5">
    <section class="card text-bg-secondary ">
        <header class="card-header">
            <h3>Agregar Base</h3>
        </header>
        <footer class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="d-flex flex-column">
                    <fieldset class="">
                        <label class="form-label" for="valor_base">Valor</label>
                        <input placeholder="Ingrese la base" class="form-control" type="number" id="valor_base" name="base_dia" required>
                    </fieldset>
                    <fieldset class="mt-2">
                        <label class="form-label" for="observacion_base">Observacion</label>
                        <textarea placeholder="Agregar observacion" class="form-control" id="observacion_base" name="base_observacion">Ninguna</textarea>
                    </fieldset>
                    <fieldset class="d-flex justify-content-end mt-2">
                        <button class="btn btn-success save-btn" type="button">Grabar</button>
                    </fieldset>
                </div>
            </form>
        </footer>
    </section>
    <section class="alert alert-danger mt-3 border border-danger text-center">
        <i class="bi bi-exclamation-diamond"></i>
        Por favor ingrese una base para el dia de hoy
        <i class="bi bi-exclamation-diamond"></i>
    </section>
</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelector(".save-btn").addEventListener("click", function (e) {
            e.preventDefault();
            let form = this.closest("form"); // Obtiene el formulario más cercano
            let base = document.getElementById("valor_base");
            valorBase = base.value;

            Swal.fire({
                text: `¿Esta seguro de grabar la base en: $${valorBase}?`,
                icon: "warning",
                showCancelButton: true,
                confirmButtonText: "Sí, guardar",
                cancelButtonText: "Cancelar",
                background: "#1e272e",
                color: "#f8f9fa",
                width: "300px"
            }).then((result) => {
                if (result.isConfirmed) {
                    form.submit(); // Envía el formulario si el usuario confirma
                }
            });
        });
    });
</script>
{% endblock %}


